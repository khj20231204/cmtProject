<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- ProductMapper.java 경로로 클래스명 ProductMapper까지 입력 --> 
<mapper namespace="com.example.cmtProject.mapper.mes.production.ProductionPrcMapper">
	
	<select id="selectWoStandByList" resultType="com.example.cmtProject.dto.mes.production.WorkOrderDTO">
		SELECT  
			PDT_NAME
			,WO_END_DATE
			,STATUS
			,COMMENTS
			,USE_YN
			,WORK_ORDER_NO
			,WORK_END_DATE
			,DUE_DATE
			,ORDER_DATE
			,WORK_ORDER_CODE
			,WORK_START_DATE
			,EMP_NAME
			,WO_NO
			,WO_CODE
			,MP_NO
			,PDT_CODE
			,PRC_CODE
			,LINE_CODE
			,EMP_ID
			,WO_DATE
			,WO_QTY
			,WO_START_DATE
			,ORDER_QTY
		FROM WORK_ORDER 
	   WHERE WO_STATUS_CODE = 'RN'
	</select>
	
	<select id="selectWoCodeList" resultType="com.example.cmtProject.dto.mes.production.WorkOrderDTO">
		SELECT  
			PDT_NAME
			,WO_END_DATE
			,STATUS
			,COMMENTS
			,USE_YN
			,WORK_ORDER_NO
			,WORK_END_DATE
			,DUE_DATE
			,ORDER_DATE
			,WORK_ORDER_CODE
			,WORK_START_DATE
			,E.EMP_NAME
			,WO_NO
			,WO_CODE
			,MP_NO
			,PDT_CODE
			,PRC_CODE
			,LINE_CODE
			,W.EMP_ID AS EMP_ID
			,WO_DATE
			,WO_QTY
			,WO_START_DATE
			,ORDER_QTY
		FROM WORK_ORDER W 
        JOIN EMPLOYEES E
          ON W.EMP_ID = E.EMP_ID
	   WHERE W.WO_CODE = #{data}
	</select>
	
	<select id="selectPdtCodeList" resultType="com.example.cmtProject.dto.mes.standardInfoMgt.BomInfoDTO">
		SELECT
		    LEVEL AS BOM_LEVEL,
		    PARENT_PDT_CODE,
		    CHILD_ITEM_CODE,
		    ITEM_TYPE,
		    BOM_PRC_TYPE,
		    BOM_QTY,
		    COMMENTS
		FROM
		  BOM
		START WITH PARENT_PDT_CODE = #{data}
	  CONNECT BY PRIOR CHILD_ITEM_CODE = PARENT_PDT_CODE
		ORDER SIBLINGS BY PARENT_PDT_CODE
	</select>
</mapper>