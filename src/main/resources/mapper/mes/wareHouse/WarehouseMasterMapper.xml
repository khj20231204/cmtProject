<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.cmtProject.mapper.mes.inventory.WarehouseMasterMapper">

    <!-- 창고 기준정보 목록 조회-->
    <select id="selectWarehouses" resultType="map" parameterType="map">
        SELECT                         
            WHS_NO,                    
            WHS_CODE,                  
            WHS_NAME,                  
            WHS_TYPE,              
            WHS_LOCATION,                  
            WHS_CAPACITY,           
            WHS_COMMENTS,           
            CURRENT_USAGE,           
            USE_YN,           
            CREATED_BY,           
            UPDATED_BY,
            CREATED_DATE,
            UPDATED_DATE          
        FROM                           
            WAREHOUSES
        WHERE
            USE_YN = 'Y'
        <if test="keyword != null and keyword != ''">
            AND (
                UPPER(WHS_CODE) LIKE '%' || UPPER(#{keyword}) || '%'
                OR UPPER(WHS_NAME) LIKE '%' || UPPER(#{keyword}) || '%'
                OR UPPER(WHS_LOCATION) LIKE '%' || UPPER(#{keyword}) || '%'
            )
        </if>
        ORDER BY
            WHS_NO DESC
    </select>
    
    <!-- 창고 기준정보 목록 단건 조회 -->
    <select id="selectSingleWarehouse" resultType="map" parameterType="map">
        SELECT                         
            WHS_NO,                    
            WHS_CODE,                  
            WHS_NAME,                  
            WHS_TYPE,              
            WHS_LOCATION,                  
            WHS_CAPACITY,           
            WHS_COMMENTS,           
            CURRENT_USAGE,           
            USE_YN,           
            CREATED_BY,           
            UPDATED_BY,
            CREATED_DATE,
            UPDATED_DATE          
        FROM                           
            WAREHOUSES
        WHERE
            WHS_CODE = #{WHS_CODE}
    </select>
    
    <!-- 창고 기준정보 등록(INSERT) -->
    <insert id="insertWarehouse" parameterType="map">
        INSERT INTO WAREHOUSES(
            WHS_NO,                    
            WHS_CODE,                  
            WHS_NAME,                  
            WHS_TYPE,              
            WHS_LOCATION,                  
            WHS_CAPACITY,           
            WHS_COMMENTS,           
            CURRENT_USAGE,           
            USE_YN,           
            CREATED_BY,           
            UPDATED_BY,
            CREATED_DATE,
            UPDATED_DATE          
        ) VALUES (
            SEQ_WAREHOUSES.NEXTVAL,
            #{WHS_CODE},
            #{WHS_NAME},
            #{WHS_TYPE},
            #{WHS_LOCATION},
            #{WHS_CAPACITY},
            #{WHS_COMMENTS},
            #{CURRENT_USAGE},
            #{USE_YN},
            #{CREATED_BY},
            #{UPDATED_BY},
            SYSDATE,
            NULL
        )
    </insert>        

    <!-- 창고 기준정보 수정(UPDATE) -->
    <update id="updateWarehouse" parameterType="map">
        UPDATE WAREHOUSES
        SET
            WHS_NAME =       #{WHS_NAME},           
            WHS_TYPE =       #{WHS_TYPE},           
            WHS_LOCATION =   #{WHS_LOCATION},           
            WHS_CAPACITY =   #{WHS_CAPACITY},          
            WHS_COMMENTS =   #{WHS_COMMENTS},        
            CURRENT_USAGE =  #{CURRENT_USAGE},        
            USE_YN =         #{USE_YN},      
            UPDATED_BY =     #{UPDATED_BY},
            UPDATED_DATE =   SYSDATE        
        WHERE
            WHS_CODE = #{WHS_CODE}
    </update>
    
    <!-- 창고 기준정보 삭제(DELETE) -->    
    <delete id="deleteWarehouse" parameterType="map">
        DELETE 
        FROM 
            WAREHOUSES
        WHERE
            WHS_CODE = #{WHS_CODE}
    </delete>
    
</mapper>