<!DOCTYPE html>
	<html xmlns:th="http://www.thymeleaf.org" 
	      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
	      layout:decorate="~{layouts/layout}">
<head>
<meta charset="UTF-8">
	<title>CMT</title>
</head>
<body>
	<div layout:fragment="content">
	<h4>생산 계획</h4>
	
	<div class="card">
		<div class="card-body">
	    	<div class="row g-3 mb-4">
	        	<div class="col-md-3">
	        		<select id="mpStatus" name="" class="form-select">
						<option>상태</option>
						<option value="등록">등록</option>
						<option value="생산중">생산중</option>
						<option value="완료">완료</option>
						<option value="대기중">대기중</option>
						<option value="중단">중단</option>
						<option value="종료">종료</option>
	            	</select>
	            </div>
	            <div class="col-md-3">	
	                <input type="text" class="form-control" placeholder="수주주문번호를 입력해주세요.">  
	            </div>
	            <div class="col-md-2 d-flex align-items-end">
	            	<button type="button" class="btn btn-outline-secondary">
		            	<i class="bi bi-search"></i>
		            </button>
	            </div>    
	            <div class="text-end mb-2">
		            <button type="button" class="btn btn-outline-secondary">저장</button>
		            <button type="button" class="btn btn-outline-secondary">삭제</button>
		            <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#mfgPlanModal">계획 등록</button>
	            </div>
	        </div>		
	    </div>

		<div id="mfgPlanGrid"></div>
	</div>
	
	<!--  모달 창 시작 -->
	<div class="modal fade" id="mfgPlanModal" tabindex="-1" aria-labelledby="mfgPlanModalLabel" aria-hidden="true">
	    <div class="modal-dialog modal-lg">
	        <div class="modal-content">
	            <div class="modal-header">
	                <h5 class="modal-title" id="mfgModalLabel">상품 등록</h5>
	                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
	            </div>
	            <form action="mfgPlanRegi" method="post">
	                <div class="modal-body">
						<label for="soCode">수주주문번호</label>
	                    <div class="form-group">
	                        <input type="text" id="soCode" class="form-control" name="" placeholder="수주주문번호 입력" required>
	                    </div>
						<label for="empId">등록직원사번</label>
						<div class="form-group" >
                        	<input type="text" id="empId" class="form-control" name="" placeholder="사번 입력" required>
                    	</div>
                    	<label for="mpStatus">생산 계획 상태</label>
                    	<div class="form-group" required>
	                        <select id="mpStatus" name="" class="form-select">
								<option>상태</option>
								<option value="등록">등록</option>
								<option value="생산중">생산중</option>
								<option value="완료">완료</option>
								<option value="대기중">대기중</option>
								<option value="중단">중단</option>
								<option value="종료">종료</option>
	                       </select>
                    	</div>
                    	<label for="mpPriority">우선순위</label>
                    	<div class="form-group" required>
	                        <select id="mpPriority" name="" class="form-select">
								<option>우선순위</option>
								<option value="상">상</option>
								<option value="중">중</option>
								<option value="하">하</option>
	                       </select>
                    	</div>
                    	<label for="soDueDate">납품 기한</label>
                    	<div class="form-group" required>
							<input type="date" id="soDueDate" class="form-control" name="" required>
                    	</div> 
                    	<label for="mpStartDate">생산 시작 예정일</label>
                    	<div class="form-group" required>
							<input type="date" id="mpStartDate" class="form-control" name="" required>
                    	</div>
                    	<label for="mpEndDate">생산 완료 예정일</label>
                    	<div class="form-group" required>
							<input type="date" id="mpEndDate" class="form-control" name="" required>
                    	</div>                      	                        	                      	
	                </div>
	                <div class="modal-footer">
	                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
	                    <button type="submit" class="btn btn-primary">등록</button>
	                </div>
	            </form>
	        </div> <!-- modal-content -->
	    </div><!-- modal-dialog modal-lg -->
	</div><!-- modal -->
	<!-- 모달 끝 -->
	
	
	<script th:inline="javascript">
	
	//================================== 그리드 부분 ================================= 
	let gridData = /*[[${mfgPlanList}]]*/ [];
	
	let grid = new tui.Grid({
        el: document.getElementById('mfgPlanGrid'), 
		data: gridData,
        rowHeaders: ['checkbox'], //수정을 따로 안 만들기 때문에 필요가 없어졌다
		//selectionUnit: 'row', //행 단위선택
		scrollX: true,
        scrollY: true,
		//width: 1600,  // 전체 너비 지정
		//bodyHeight: 250, // 세로 스크롤을 위한 높이 지정
		pageOptions: {
		   useClient: true,   // 클라이언트 사이드 페이징 사용
		   perPage: 10        // 페이지당 행 수
		 },
        columns: [
			{
				header: '생산계획번호',
				name: 'mpNo',
				width: 100,
				sortable: true, 
				filter: 'text',
				align: "center" 
            },
           {
                header: '수주번호',
                name: 'soNo',
				width: 200,
				sortable: true, 
				filter: 'text',
				align: "center" 
            },
			{
                header: '등록 직원명',
                name: 'empName',
				width: 200,
				fontSize: '40',
				sortable: true, 
				filter: 'text',
				align: 'center',
				editor: "text"
            },
			{
                header: '우선순위',
                name: 'mpPriority',
				width: 200,
				sortable: true, 
				filter: 'text',
				align: "center",
				editor: "text"
            },
            {
				header: '상태',
                name: 'mpStatus',
				width: 200,
				sortable: true, 
				filter: 'text',
				align: 'center',
				editor: "text"
            },
			{
                header: '생산 시작 예정일',
                name: 'mpStartDate', 
				width: 200,
				sortable: true, 
				filter: 'text',
				align: 'center',
				editor: "text"
            },
			{
                header: '생산 완료 예정일',
                name: 'mpEnddate',
				width: 200,
				sortable: true, 
				filter: 'text',
				align: 'center',
				editor: "text"
            },
			{
                header: '등록일자',
                name: 'mpCreatedAt',
				width: 200,
				sortable: true, 
				filter: 'text',
				align: 'center',
				editor: "text"
            },
			{
                header: '수정일자',
                name: 'mpUpdatedAt',
				width: 200,
				sortable: true, 
				filter: 'text',
				align: 'center',
				editor: "text"
            }
        ], // 열 설정
		autoEdit: true,
		editingEvent: 'dblclick' 
    });
		
	/*
	grid.on('onGridUpdated', (ev) => {
		// 그리드 레이아웃 새로고침 (로드가 다 되지 않는 경우 그리드가 흰색 화면으로 출력될 때가 있다.)
	    grid.refreshLayout();
	});*/
	
	
	</script>
	
	</div>
</body>
</html>